<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pl" lang="pl">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
    <title>GerbView - Przegl±darka plików Gerber i Excellon</title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link rel="stylesheet" type="text/css" href="style.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="gerbview-files\localstyle.css" media="screen" />
	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700&subset=latin,latin-ext" />
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Merriweather+Sans:400,700&subset=latin,latin-ext" />
  </head>

<body>

<div id="document">

<div id="navbar">

<div id="firstpage">
<img src="kicad_logo.png" width="100%" alt="Logo programu" />

<p class="left"><span class="title">GerbView</span><br />
<span class="subtitle">Przegl±darka plików Gerber i Excellon</span></p>
</div>

<div id="index">
<h1>Spis tre¶ci</h1>
<ol>
  <li><a href="#p1">Wprowadzenie</a></li>
  <li><a href="#p2">D-Kody, Apertury a pliki Gerber</a>
  <ul>
    <li><a href="#p21">Krótki opis dzia³ania fotoploterów</a></li>
    <li><a href="#p22">Prostota, czyli tzw. "miecz obosieczny"</a></li>
    <li><a href="#p23">Zawarto¶æ plików Gerber</a></li>
    <li><a href="#p24">G-Kody - Ustawianie warunków pocz±tkowych</a>
    <ul>
      <li><a href="#p241">G90/G91 - Koordynaty wzglêdne a absolutne</a></li>
      <li><a href="#p242">G70/G71 - Cale a milimetry</a></li>
      <li><a href="#p243">G54 - Wybór narzêdzia</a></li>
    </ul></li>
    <li><a href="#p25">D01, D02, D03 - Polecenia rysowania i b³ysków</a></li>
    <li><a href="#p26">D10-D999 - Pozycjonowanie ko³a z aperturami</a></li>
    <li><a href="#p27">Ró¿ne M-Kody</a></li>
    <li><a href="#p28">Dane o koordynatach X,Y</a></li>
    <li><a href="#p29">Pomijanie przecinków</a></li>
    <li><a href="#p210">Pomijanie zer pocz±tkowych i koñcowych</a></li>
    <li><a href="#p211">Dane modalne o koordynatach</a></li>
    <li><a href="#p212">Komendy modalne</a></li>
    <li><a href="#p213">Komendy dotycz±ce rysowania zaokr±gleñ: G02/G03 i G75</a></li>
  </ul></li>
  <li><a href="p3">Format RS274X - Informacje podstawowe</a>
  <ul>
    <li><a href="#p31">Wprowadzenie</a>
    <ul>
      <li><a href="#p311">Zalety RS274X</a></li>
      <li><a href="#p312">Co to w³a¶ciwie jest ten RS274X?</a></li>
      <li><a href="#p313">Gdzie zdobyæ oficjaln± specyfikacjê RS274X?</a></li>
    </ul></li>	
    <li><a href="#p32">Informacje o formacie, osadzone w nag³ówku 274X</a>
    <ul>
      <li><a href="#p321">Przyk³ady</a></li>
      <li><a href="#p322">Jednostki osadzone</a></li>
      <li><a href="#p323">Polaryzacja obrazu</a></li>
      <li><a href="#p324">Osadzone definicje apertur</a>
      <ul>
        <li><a href="#p3241">Definicje apertur</a></li>		  
        <li><a href="#p3242">Podstawowe definicje apertur</a></li>		  
        <li><a href="#p3243">Standardowe okrêgi</a></li>		  
        <li><a href="#p3244">Przyk³ady okrêgów</a></li>		  
        <li><a href="#p3245">Standardowe prostok±ty</a></li>		  
        <li><a href="#p3246">Makra apertur</a></li>		  
        <li><a href="#p3247">Podstawowe elementy makr</a></li>		  
        <li><a href="#p3248">Przyk³adowe makro z wykorzystaniem apertur - £±cze termiczne</a></li>		  
      </ul></li>
      <li><a href="#p325">Warstwy wielokrotne</a></li>
      <li><a href="#p326">G36/G37 Rysowanie wielok±tów</a>
      <ul>
        <li><a href="#p3261">Przyk³adowe u¿ycie G36/G37</a></li>
      </ul></li>
	</ul></li>
  </ul></li>
  <li><a href="#p4">GerbView - Obs³uga programu</a>
  <ul>
    <li><a href="#p41">Wprowadzenie do GerbView</a></li>
    <li><a href="#p42">G³ówne okno programu</a></li>
    <li><a href="#p43">Górny pasek narzêdzi</a></li>
    <li><a href="#p44">Boczne paski narzêdzi</a>
    <ul>
      <li><a href="#p441">Lewy pasek narzêdzi - Opcje</a></li>
      <li><a href="#p442">Panel zarz±dzania warstwami</a></li>
      <li><a href="#p443">Tryby wy¶wietlania warstw</a></li>
      <li><a href="#p444">Wy¶wietlanie wybranej warstwy</a></li>
    </ul></li>
    <li><a href="#p45">Drukowanie warstw</a>
    <ul>
      <li><a href="#p451">Przesuwanie bloków</a></li>
    </ul></li>
    <li><a href="#p46">Polecenia menu</a>
    <ul>
      <li><a href="#p461">Menu Plik</a></li>
      <li><a href="#p462">Eksport do Pcbnew</a></li>
      <li><a href="#p463">Menu Ustawienia</a></li>
      <li><a href="#p464">Menu Ró¿ne</a></li>
    </ul></li>
  </ul></li>
</ol>
</div>

<div id="copyright">
<p><strong>Prawa autorskie</strong><br />
Copyright &copy; 2010-2014. Ten dokument jest chroniony prawem autorskim. Lista autorów znajduje siê poni¿ej.<br />
Mo¿esz go rozpowszechniaæ oraz modyfikowaæ na zasadach okre¶lonych w <strong>GNU General Public License</strong> (<a href="http://www.gnu.org/licenses/gpl.html">http://www.gnu.org/licenses/gpl.html</a>), wersja 3 lub pó¼niejsza, albo okre¶lonych w <strong>Creative Commons Attribution License</strong> (<a href="http://creativecommons.org/licenses/by/3.0/">http://creativecommons.org/licenses/by/3.0/</a>), wersja 3.0 lub pó¼niejsza.<br />
Wszystkie znaki towarowe u¿yte w tym dokumencie nale¿± do ich w³a¶cicieli.</p>

<p><strong>Autorzy</strong><br />
Steve DiBartolomeo, Jean-Pierre Charras, Fabrizio Tappero, Kerusey Karyu.</p>

<p><strong>Kontakt</strong><br />
Wszelkie komentarze lub sugestie dotycz±ce tego dokumentu prosimy kierowaæ na listê dyskusyjn± deweloperów programu KiCad: <a href="https://launchpad.net/~kicad-developers">https://launchpad.net/~kicad-developers</a></p>

<p><strong>Podziêkowania</strong><br />
Steve DiBartolomeo, <em>Application Manager</em><br />
<em>Artwork Conversion Software, Inc.</em><br />
<em>&copy; 1991 Artwork Conversion Software, Inc.</em><br /></p>

<p><strong>Wersja</strong><br />
19 Pa¼dziernika 2014</p>

<p><strong>Informacja dla u¿ytkowników komputerów Apple Macintosh</strong><br />
Wsparcie programu KiCad dla systemu operacyjnego Apple OS X jest w zaawansowanej fazie eksperymentalnej.</p>
</div>

</div>

<div id="text">

<a name="p1" />
<h1>1. Wprowadzenie</h1>

<p>Nie wa¿ne jak potê¿ne mo¿e byæ oprogramowanie do projektowania, gdy¿ wszystko sprowadza siê do tego, i¿ na koñcu trzeba bêdzie stworzyæ plik dla fotoplotera w formacie Gerber by utworzyæ klisze. Istniej±c± przepa¶æ pomiêdzy projektem p³ytki a procesem jej fizycznej realizacji, mo¿na zmniejszyæ poprzez lepsze zrozumienie tego, co jest zawarte w pliku dla fotoplotera i w jaki sposób przek³ada siê to na finalny produkt. Wszystko dlatego, ¿e nieporozumienia pomiêdzy projektantem PCB i operatorem fotoploera s± w du¿ej mierze odpowiedzialne za du¿y procent z³ych klisz produkowanych w tej bran¿y. A to kosztuje.</p>

<p>Dlatego te¿, przed opisem w³a¶ciwego programu do przegl±dania plików Gerber jakim w <strong>KiCad EDA Suite</strong> jest <strong>GerbView</strong>, powinni¶my siê zapoznaæ z podstawowymi informacjami na temat dzia³ania fotoploterów i formatów plików jakie s± przez nie akceptowane.</p>

<p><strong>Osoby, które mia³y do czynienia z plikami Gerber i znaj± ju¿ te informacje mog± od razu przej¶æ do <a href="#p4">rozdzia³u czwartego</a>.</strong></p>

<a name="p2" />
<h1>2.  D-Kody, Apertury a pliki Gerber</h1>

<a name="p21" />
<h2>Krótki opis dzia³ania fotoploterów</h2>

<p>Przed rozpoczêciem zg³êbiania szczegó³ów plików fotoplotera, krótka dyskusja o dzia³aniu fotoploterów pozwoli by dalszy materia³ by³ ³atwiejszy do strawienia.</p>

<p>Wczesne fotoplotery sk³ada³y siê z precyzyjnej p³yty napêdzanej przez serwomechanizm pozycjonuj±cy X-Y, do którego przytwierdzony jest kawa³ek wysoko-kontrastowej <strong>kliszy</strong>. Mocne ¼ród³o ¶wiat³a jest kierowane przez <strong>migawkê</strong> i przez otwory <strong>ko³a apertur</strong>, i skoncentrowane na kliszy. Kontroler przetwarza polecenia Gerber w odpowiednie ruchy p³yty, obroty ko³a i otwarcia migawki.</p>

<p><img src="gerbview-files/image1.png" alt="Budowa pierwszych fotoploterów" /><br />
Rys 1 - Schemat dzia³ania fotoplotera</p>

<p>Gdy migawka zostaje otwarta, ¶wiat³o pada przez <strong>aperturê</strong>, tworz±c jej obraz na <strong>kliszy</strong>. Gdy p³yta porusza siê podczas otwarcia migawki, powstaje na kliszy linia lub pasek. Dostarczaj±c odpowiednich poleceñ dla mechanizmu przesuwu, mechanizmu apertur i migawki mo¿na utworzyæ prawie dowolny obraz na kliszy.</p>

<p><img src="gerbview-files/image2.png" alt="Praca fotoplotera" /><br />
Rys 2 - Praca plotera</p>

<a name="p22" />
<h2>Prostota, czyli tzw. "miecz obosieczny"</h2>

<p>Ca³e piêkno w bazie poleceñ Gerber to ich prostota. S± tylko cztery g³ówne polecenia i dane o po³o¿eniu. Baza poleceñ musia³a byæ prosta i zwarta, poniewa¿ pierwsze maszyny sterowane by³y kruchymi ta¶mami perforowanymi. Potrzeba kompresji jak najwiêkszej ilo¶ci informacji w kilkunastu bajtach, wyja¶nia pochodzenie wielu "problemów", z którymi mamy do czynienia dzisiaj, gdy miejsce jest mierzone w gigabajtach a nie w setkach bajtów.<br />
Prostota jednak ma równie¿ swoj± cenê. W plikach Gerber brakuje istotnych informacji niezbêdnych do uruchomienia plotera. Te brakuj±ce dane przekazywane od projektanta do operatora plotera oddzielnie s± czêsto ¼ród³em b³êdów. Ponadto nie sposób siê oprzeæ pokusie tworzenia niestandardowych rozszerzeñ. Ka¿dy producent fotoplotera obs³uguje podstawowe komendy Gerber oraz bez wzglêdu na funkcjonalno¶æ czuje konieczno¶æ zró¿nicowania swojej maszyny. Powoduje to, ¿e funkcjonalno¶æ dla jednego cz³owieka staje siê nierozwi±zywalnym problemem dla innego cz³owieka.</p>

<a name="p23" />
<h2>Zawarto¶æ plików Gerber</h2>

<p>Poni¿ej znajduje siê przyk³adowa zawarto¶æ pliku Gerber, ilustruj±ca jego strukturê jak i zawarto¶æ zwi±zan± z jego formatem:</p>

<pre><code>G90*                   1
G70*                   2
G54D10*                3
G01X0Y0D02*            4
X450Y330D01*           5
X455Y300D03*           6
G54D11*                7
Y250D03*               8
Y200D03*               9
Y150D03*               10
X0Y0D02*               11
M02*                   12</code></pre>

<p>Numery linii nie s± tutaj czê¶ci± pliku.<br />
Badaj±c ten plik bez ¿adnej wcze¶niejszej wiedzy na temat plików Gerber, mo¿na by ju¿  wywnioskowaæ, ¿e ka¿dy wiersz przedstawia konkretne polecenie dla maszyny, i ¿e gwiazdk± (<code>*</code>) jest znak koñca komendy. Wydaje siê, ¿e istniej± ró¿nego rodzaju polecenia: instrukcje pocz±wszy od <code>G</code>, <code>D</code>, <code>M</code> i <code>x, y</code> jako dane o wspó³rzêdnych.</p>

<a name="p24" />
<h2>G-Kody - Ustawianie warunków pocz±tkowych</h2>

<p>Gerber nazywa komendy <code>Gxx</code> <strong>kodami przygotowawczymi</strong>. W wielu przypadkach kody te s± u¿ywane do przygotowania maszyny do dalszego rysowania. Niektóre z <strong>G-Kodów</strong> s± na tyle wa¿ne, ¿e wypada umieæ je rozpoznawaæ:</p>

<a name="p241" />
<h3>G90/G91 - Koordynaty wzglêdne a absolutne</h3>

<p>Komenda <code>G90</code> w pierwszej linii mówi maszynie, ¿e dane o koordynatach s± bezwzglêdne. Ka¿dy zestaw koordynatów jest odniesiony do punktu odniesienia (0,0) sto³u. Odwrotno¶ci± koordynatów absolutnych s± koordynaty przyrostowe (wzglêdne), które s± mierzone wzglêdem poprzedniej koordynaty, i s± one w³±czane poprzez u¿ycie polecenia <code>G91</code>.<br />
Mo¿esz nigdy nie spotkaæ polecenia <code>G90</code> w pliku Gerber, poniewa¿ wiele programów zak³ada, ¿e koordynaty absolutne s± domy¶lnym ustawieniem i nie przejmuj± siê zapisywaniem polecenia <code>G90</code>. Co gorsza, wiele z danych z koordynatami wzglêdnymi równie¿ nie zawraca sobie g³owy u¿ywaniem polecenia <code>G91</code>. Je¶li zatem zobaczysz "chaotyczny" obrazek podobny do tego jak na rysunku 3 na swojej stacji CAM, znaczyæ to bêdzie, ¿e prawdopodobnie próbujesz wczytaæ plik zapisany z koordynatami wzglêdnymi.</p>

<p><img src="gerbview-files/image3.png" alt="Z³a i dobra interpretacja kodów" /><br />
Rys 3 - Lewy: Wy¶wietlany poprawnie. Prawy: Przegl±darka ustawiona na wzglêdny gdy dane s± absolutne.</p>

<a name="p242" />
<h3>G70/G71 - Cale a milimetry</h3>

<p><code>G70*</code> (linia 2) oznacza, ¿e nastêpuj±ce po niej dane s± w jednostkach calowych. Jest to nastêpny G-kod, który rzadko wystêpuje w plikach Gerber. W Stanach Zjednoczonych domy¶lnie przyjmuje siê, ¿e pliki Gerber posiadaj± jednostki calowe, ale pliki generowane w innych czê¶ciach ¶wiata mog± byæ mieæ jednostki calowe lub metryczne (w milimetrach). Polecenie <code>G71</code> oznacza, ¿e jednostki s± zapisywane w milimetrach.</p>

<a name="p243" />
<h3>G54 - Wybór narzêdzia</h3>

<p><code>G54</code>, wybór narzêdzia, (linia 3) jest najczê¶ciej spotykanym G-kodem i instruuje ploter by obróci³ ko³em apertur na pozycjê opisan± przez <code>Dxx</code>, bezpo¶rednio po poleceniu <code>G54</code>. Je¶li nie znajdziesz polecenia <code>G54</code> w danym pliku to nie panikuj. <code>G54</code> jest opcjonalnym poleceniem dla wielu fotoploterów; niektóre programy nie u¿ywaj go i fotoploter rozpozna, ¿e przez podanie samego <code>Dxx</code> (gdzie <code>xx</code> nie jest jedn± z warto¶ci: <code>01</code>, <code>02</code>, <code>03</code>) powinien wybraæ w³a¶ciwe narzêdzie.</p>

<a name="p25" />
<h2>D01, D02, D03 - Polecenia rysowania i b³ysków</h2>

<p><strong>D-kody</strong> to instrukcje dla fotoplotera, które naturalnie zawieraj± literkê "D". Pierwsze trzy D-kody kontroluj± przesuw sto³u.</p>

<p><code>D01</code> (<code>D1</code>): przesuñ do okre¶lonej pozycji x-y z <strong>otwart± migawk±</strong>.<br />
<code>D02</code> (<code>D2</code>): przesuñ do okre¶lonej pozycji x-y z <strong>zamkniêt± migawk±</strong>.<br />
<code>D03</code> (<code>D3</code>): przesuñ do okre¶lonej pozycji x-y z <strong>zamkniêt± migawk±</strong>; nastêpnie <strong>otwórz i zamknij migawkê</strong> - polecenie znane jako "<strong>b³ysk</strong>".</p>

<p><code>D01</code> to polecenie, które "rysuje" linie. <code>D02</code> to polecenie, przeznaczone do przemieszczania sto³u bez na¶wietlania kliszy. <code>D01</code> i <code>D02</code> odpowiadaj± przesuwaniu papieru na ploterze z piórem opuszczonym i podniesionym.<br />
<code>D03</code> to polecenie "b³yskowe". Stó³ jest przemieszczany z zamkniêt± migawk±. Gdy ¿±dane wspó³rzêdne x-y zostan± osi±gniête, migawka otwiera siê i zamyka pozostawiaj±c obraz apertury na kliszy. Instrukcja "b³yskowa" jest skutecznym sposobem na rysowanie wielu tysiêcy pól lutowniczych, jakie wystêpuj± w wiêkszo¶ci obwodów drukowanych.<br />
Polecenia <code>D01</code>, <code>D02</code> i <code>D03</code> wystêpuj± po danych o pozycji w uk³adzie wspó³rzêdnych. Na przyk³ad nastêpuj±ca sekwencja poleceñ:</p>

<pre><code>X0Y0D02*
X450Y330D01*
X455Y300D03*</code></pre>

<p>Przesunie stó³ na pozycjê 0,0 z zamkniêt± migawk± a nastêpnie narysuje liniê z punktu 0,0 do punktu 450,330. B³ysk zostanie umieszczony na pozycji 455,300.</p>

<a name="p26" />
<h2>D10-D999 - Pozycjonowanie ko³a z aperturami</h2>

<p>D-kody z warto¶ciami z zakresu 10-999 w przeciwieñstwie do kodów <code>D01</code>, <code>D02</code> i <code>D03</code> nie s± poleceniami, ale zawieraj± dane. Reprezentuj± one <strong>apertury</strong> lub <strong>po³o¿enie ko³a apertur</strong> fotopoltera. Dawniej fotoplotery u¿ywa³y 24 pozycyjnego ko³a.<br />
Ka¿dy otwór jest wype³niony fragmentem kliszy. Ko³o jest obracane co powoduje, ¿e w strumieniu ¶wiat³a zostaje umieszczona ¿±dana apertura. Tabela 1 pokazuje zale¿no¶æ pomiêdzy D-kodem a aperturami.</p>

<p>Tabela 1. D-kody a apertury</p>

<pre><code> D-kod   Pozycja   D-kod    Pozycja
         Apertury           Apertury
  10       1        20        13
  11       2        21        14
  12       3        22        15
  13       4        23        16
  14       5        24        17
  15       6        25        18
  16       7        26        19
  17       8        27        20
  18       9        28        21
  19       10       29        22
  70       11       72        23
  71       12       73        24</code></pre>

<p>Widaæ, ¿e dla kodów od <code>D10</code> do <code>D19</code> przyporz±dkowanie jest logiczne. Potem, zamiast odwzorowaæ <code>D20</code> na pozycji 11, wtr±ci³y siê kody <code>D70</code> i <code>D71</code>. Mapowanie jest kontynuowane, nastêpnie znów wypaczone w dwóch miejscach w punkcie, w którym mo¿na by siê spodziewaæ kodu <code>D30</code>. Zamiast niego wskoczy³y <code>D72</code> i <code>D73</code>. Wiêkszo¶æ fotoploterów i oprogramowania CAM poprosz± ciê o o podanie warto¶ci apertury opisanych przez D-kody; kilka odniesieñ pozycji apertury.</p>

<p>Istniej± D-kody od 3 do 9, ale s± one specjalnymi poleceniami dla rzadko spotykanych lub przestarza³ych maszyn.</p>

<a name="p27" />
<h2>Ró¿ne M-Kody</h2>

<p>Na koñcu pliku widzimy komendê <code>M02*</code>. Gerber nazywa M-kody, jako kody ró¿ne. Jedynymi wspólnymi M-kodami jakie u¿ywane s± na koñcu pliku to: <code>M00</code>, <code>M01<code> i </code>M02</code>, które s± ró¿nymi rodzajami polecenia "stop". Czasami widzi siê kod <code>M02</code> na pocz±tku pliku Gerber. Podobno niektóre z aplikacji wprowadzaj± go by mieæ pewno¶æ, ¿e wszystkie poprzednie uruchomione pliki zosta³y zatrzymane - jednak wiele z oprogramowañ CAM widz±c kod <code>M02</code> na pocz±tku pliku, ignoruje wszystko co nastêpuje po nim.</p>

<a name="p28" />
<h2>Dane o koordynatach X, Y</h2>

<p>Dane o koordynatach zajmuj± wiêksz± czê¶æ w pliku Gerber. Trudno jest rêcznie ¶ledziæ ruch p³yty na podstawie wydruku, poniewa¿ w plikach Gerber wykorzystuje siê kilka technik, by zminimalizowaæ liczbê bajtów potrzebnych do reprezentowania danych. Nale¿y do nich:</p>
<ul>
  <li>Pomijanie przecinków w danych x, y,</li>
  <li>Pomijanie zer pocz±tkowych lub koñcowych,</li>
  <li>Wykorzystanie tylko informacji o zmianach w danych wspó³rzêdnych.</li>
</ul>

<a name="p29" />
<h2>Pomijanie przecinków</h2>

<p>Przecinek jest zbêdny, je¶li z góry wiadomo, gdzie bêdzie siê on znajdowa³. Ponowne wstawianie przecinka w odpowiednim miejscu nale¿y do oprogramowanie steruj±cego fotoplotera. Jednym z najczêstszych b³êdów pocz±tkuj±cych projektantów jest za³o¿enie, ¿e  osoba otrzymuj±ca ich dane wie, jakiego formatu danych u¿yli. Rozwa¿my nastêpuj±ce polecenia Gerber:</p>

<pre><code>X00560Y00320D02*
X00670Y00305D01*
X00700Y00305D01*</code></pre>

<p>P³yta przesuwa siê wzd³u¿ osi X od 00560 do 00670 podczas pierwszych dwóch poleceñ. Ale co w sumie 00560 ma reprezentowaæ? To mo¿e byæ 5,6 cala, 0,56 cala, 0,056 cala lub nawet (nie prawdopodobnie) 0,0056 cala. Nie sposób powiedzieæ. Je¿eli projektant powiedzia³, ¿e istniej± dwie liczby przed przecinkiem i 4 liczby po przecinku to wiadomo, ¿e 00560 stanowi 0,56 cala.</p>

<p><strong>Zasada numer 1. Je¶li wysy³asz plik Gerber, zawsze dostarczaj informacjê o formacie danych. Je¶li dostajesz plik Gerber, zawsze pytaj o informacjê o formacie danych.</strong></p>

<p>Co, je¶li klient z³ama³ zasadê numer 1 i przysy³a plik Gerber bez informacji o formacie danych? Pracujesz na nocnej zmianie, jest godzina dwudziesta trzecia i trzeba wykre¶liæ kliszê na 8 rano nastêpnego dnia. Masz zgadywaæ? Istnieje piêæ cyfr wspó³rzêdnych tak, ¿e suma liczb ca³kowitych przed i po przecinku musi byæ równa 5. Najbardziej prawdopodobnym kandydatem jest format 2.3.<br />
Dlaczego? Nie wiele p³ytek jest dzi¶ d³u¿szych ni¿ 99 cali i nie wiele p³ytek jest budowanych z dok³adno¶ci± mniejsz± ni¿ 0,001 cala. Wy¶wietl p³ytkê na stacji CAM. Je¿eli ca³kowita wielko¶æ wygl±da dobrze (powiedzmy 8 cali) kontynuuj dalej. Je¶li na stole p³ytka wychodzi jako 80 cali lub 0,8 cala po d³ugo¶ci, to prawdopodobnie musisz j± przeskalowaæ przez 10 w jednym lub drugim kierunku.</p>

<a name="p210" />
<h2>Pomijanie zer pocz±tkowych i koñcowych</h2>
<p>Projektanci baz danych Gerber nie spoczêli na wyeliminowaniu przecinków. Musieli spojrzeæ na i pomy¶leæ:<br />
"Po co s± te wszystkie dodatkowe zera z przodu? Za³ó¿my, ¿e je odetniemy. Nadal mo¿na bêdzie dowiedzieæ siê koordynatach, je¶li policzysz miejsca po przecinku pocz±wszy od prawej strony liczby."</p>

<pre><code>Bez pomijania      Z pomijaniem

X00560Y00320D02*   X560Y230D2*
X00670Y00305D01*   X670Y305D1*
X00700Y00305D01*   X700Y305D1*</code></pre>

<p>Bez pomijania zera u¿ywane jest 48 bajtów. Z pomijaniem tylko 33 bajty s± wymagane do przedstawienia tej samej informacji. W czasie ta¶m perforowanych by³o to bardzo znaczne zmniejszenie ilo¶ci ta¶my.<br />
W zale¿no¶ci od danych mo¿e byæ jeszcze lepiej, nie pozostawiaj±c tylko zer koñcowych.</p>

<pre><code>Bez pomijania      Z pomijaniem

X00560Y00320D02*   X0056Y0032D2* 
X00670Y00305D01*   X0067Y00305D1*
X00700Y00305D01*   X007Y00305D1* </code></pre>

<p>Aby poprawnie zinterpretowaæ dane, trzeba policzyæ liczby pocz±wszy od lewej strony w celu zlokalizowania miejsca po przecinku. Myl±ce? Tak. Prowadzi to do powstania:</p>

<p><strong>Zasada numer 2. Gdy wysy³asz plik Gerber, zawsze informuj o pomijaniu pocz±tkowych lub  koñcowych zer. Gdy dostajesz plik Gerber, zawsze pytaj o pomijanie pocz±tkowych i koñcowych zer.</strong></p>

<p>Okazuje siê, ¿e pomijanie zer pocz±tkowych jest bardziej spotykane.</p>

<a name="p211" />
<h2>Dane modalne o koordynatach</h2>

<p>Po wyeliminowaniu przecinków dziesiêtnych i wyeliminowaniu zbêdnych zer mo¿na by pomy¶leæ, ¿e projektanci baz danych mogli ju¿ osi±¶æ na laurach. Wcale nie. Jeden z bystrych  programistów zauwa¿y³, ¿e te same koordynaty ci±gle siê pojawiaj±, gdy p³yta porusza siê wzd³u¿ osi X lub Y.<br />
"Dlaczego nie pamiêtaæ ostatnich warto¶ci X i Y, a na wyj¶ciu podawaæ je tylko wtedy, gdy zostan± one zmienione!"</p>

<pre><code>Pe³ne koordynaty	Koordynaty modalne
X560Y230D2*	       X560Y230D2*
X670Y305D1*	       X670Y305D1*
X700Y305D1*	       X700D1*</code></pre>

<p>Koncepcja, z zapamiêtywaniem przez ploter ostatniej warto¶ci wspó³rzêdnych nazywa siê modalno¶ci±. P³yty komputerów PC czêsto posiadaj± setki pól lutowniczych w rzêdach wzd³u¿ jednej z osi X lub Y i odpowiednio posortowane pliki Gerber bêd± znacznie mniejsze, gdy zbêdne wspó³rzêdne zostan± wyeliminowane. Jest to podstaw± koncepcji, gdzie dane o koordynatach s± zawsze modalne. Nie musisz informowaæ swojego wytwórcy docelowego, ¿e dane s± modalne lub nie-modalne - ka¿dy fotoploter i oprogramowanie CAM wspiera dane modalne. W powy¿szym przyk³adzie zaoszczêdzili¶my 4 dodatkowe bajty u¿ywaj±c zapisu za pomoc± <strong>wspó³rzêdnych modalnych</strong>.</p>

<a name="p212" />
<h2>Komendy modalne</h2>

<p>Modalno¶æ jest dobrym pomys³em dla danych i dzia³a równie dobrze dla poleceñ. Na przyk³ad, je¶li masz ci±g poleceñ rysuj±cych dlaczego powtarzaæ polecenie <code>D01</code> za ka¿dym razem. Niech pozostanie aktywne do czasu wydania innego polecenia (<code>D02</code> lub <code>D03</code>).</p>

<pre><code>D1 nie modalne      D1 modalne

X560Y230D2*         X560Y230D2*
X670Y305D1*         X670Y305D1*
X700D1*             X700D1*
X730D1*             X730D1*
X760D1*             X760D1*
Y335D1*             Y335D1*</code></pre>

<p>Wydaje siê, ¿e wszystkie polecenia Gerber powinny byæ modalne. Po wydaniu polecenia jest ono aktywne do czasu jego zast±pienia lub wy³±czenia. Istnieje jednak kilka dziwnych wyj±tków, które czasami powoduj±  problemy. Najciekawsze jest polecenie "b³yskowe" <code>D03</code>.</p>

<p>Niektóre marki fotoploterów nie traktuj± <code>D03</code> jako polecenia modalne. Oznacza to, ¿e spodziewaj± siê <code>D03</code> na koñcu ka¿dego polecenia typu "b³yskowego". Mieli¶my do czynienia z tym na fotoploterach FIRE MDA 9000.<br />
"B³yski", które by³y wy¶wietlane na naszej stacji CAM nie pojawia³y siê na kliszy. Problem mo¿na ³atwo rozwi±zaæ poprzez ponowne wygenerowanie danych Gerber przy wyra¼nym u¿yciu <code>D03</code> - Lavenir posiada narzêdzie, które mo¿e wykonaæ i wiele programów CAM mo¿e byæ skonfigurowanych do naprawy poleceñ <code>D03</code> zarówno jako modalnych jak i nie modalnych.<br />
Innym dziwnym wyj±tkiem od normy jest zachowanie siê w trybie modalnym poleceñ <code>G02/G03</code> - poleceñ do rysowania zaokr±gleñ. Wiele fotoploterów powraca do <code>G01</code> (tryb liniowy) po <code>G02/G03</code> (tryb zaokr±gleñ).</p>

<a name="p213" />
<h2>Komendy dotycz±ce rysowania zaokr±gleñ: G02/G03 i G75</h2>

<p>Fotoplotery mog± rysowaæ ³uki, gdy zostan± do tego poinstruowane. W przesz³o¶ci polecenia do rysowania zaokr±gleñ by³y rzadko stosowane do produkcji p³ytek drukowanych. Miêkkie obwody drukowane (<em>Flex tapes</em>) u¿ywaj± zakrzywionych ¶cie¿ek w celu zmniejszenia stresu i zmniejszenia odbiæ w sygna³ach logicznych wysokiej prêdko¶ci. Zatem wraca zainteresowanie odczytem i zapisem danych Gerber z wykorzystaniem ³uków, i kilka zaskakuj±cych niespodzianek wychodzi na wierzch.<br />
Podstawowy format dla interpolacji ko³owej to:</p>

<pre><code>Gnn  Xnnnn Ynnnn  Innnn Jnnnn  Dnn*</code></pre>

<p>Przyk³adowo: <code>G02X40Y30150J0D01*</code></p>

<p>Gdzie <code>G02</code> wskazuje ruch zgodny ze wskazówkami zegara, <code>G03</code> wskazuje obrót w przeciwn± stronê, a <code>G75</code> w³±cza pe³ny okr±g 360 stopni. <code>I, J</code> to dodatkowe wspó³rzêdne lokalizuj±ce centrum ³uku. Polecenia <code>G02</code> i <code>G03</code> s± rzadko traktowane jako modalne.<br />
Zajê³o by tu sporo miejsca w³a¶ciwe opisanie ró¿nych kombinacji, które mog± wyst±piæ. Polecenia do rysowania zaokr±gleñ mog± byæ ograniczone tylko do danych o kwadrancie na starszych komputerach lub opisywaæ ³uki o pe³nych 360 stopniach w przypadku nowszych maszyn. Znaczenie zmian w <code>I, J</code> zale¿y zatem od tego, czy dane o koordynatach s± absolutne czy przyrostowe.</p>

<a name="p3" />
<h1>3.  Format RS274X - Informacje podstawowe</h1>

<a name="p31" />
<h2>Wprowadzenie</h2>

<p>Je¶li jeste¶ projektantem PCB prawdopodobnie s³ysza³e¶ co¶ nieco¶ o <strong>rozszerzonym formacie Gerber - RS274X</strong>. Najnowsze wersje wielu programów do trasowania PCB oferuj± RS274X jako opcjê lub generuj± pliki tylko w tym formacie - tak jak na przyk³ad Allegro firmy Cadence.</p>

<a name="p311" />
<h3>Zalety RS274X</h3>

<p>RS274X zawiera wiele poleceñ wysokopoziomowych, które pozwalaj± twórcy danych Gerber okre¶liæ fotoplot bardzo precyzyjnie - o wiele bardziej ni¿ RS274D, co poci±gnê³o za sob± dostarczenie wielu istotnych informacji niezale¿nie od pliku danych.</p>

<a name="p312" />
<h3>Co to w³a¶ciwie jest ten RS274X?</h3>

<p>Jest to rozszerzenie standardu RS274D (powszechnie znanego jako Gerber), który zawiera:</p>
<ul>
  <li>wbudowane dane o formacie, jednostkach i danych informacyjnych</li>
  <li>wbudowane dane apertur</li>
  <li>definiowanie w³asnych apertur</li>
  <li>polecenia kontroluj±ce klisze</li>
  <li>mo¿liwo¶æ wbudowania obrazu wielu warstw w jednym pliku</li>
  <li>definicje specjalnych wielok±tów</li>
</ul>

<p>Ten rozdzia³ zak³ada, ¿e czytelnik zna ju¿ podstawowe komendy Gerber - je¶li nie, powinien wpierw przeczytaæ rozdzia³ <a href="#p2">D-Kody, Apertury a pliki Gerber</a>, który podsumowuje podstawy plików Gerber.<br />
Niektóre z informacji wspomniane tutaj s± aktualnie dostêpne - choæ rzadko u¿ywane - w specyfikacji <strong>RS274D</strong>.</p>

<a name="p313" />
<h3>Gdzie zdobyæ oficjaln± specyfikacjê RS274X?</h3>

<p>Specyfikacja RS274X zosta³a opracowana przez Gerber Systems.<br />
Gerber zosta³ kupiony przez Barco, firmê pochodz±c± z Belgii. Specyfikacja 427X jest obecnie dostêpna pod adresem: <a href="http://www.barco.com/ets/data/rs274xc.pdf">http://www.barco.com/ets/data/rs274xc.pdf</a></p>

<a name="p32" />
<h2>Informacje o formacie, osadzone w nag³ówku 274X</h2>

<p>RS274X zawiera polecenie, które osadza w pliku kluczowe informacje o formacie, pomijaniu zer i typu danych w jednej linii:<br />

<img src="gerbview-files/rs274x_header.png" alt="Format nag³ówka pliku" /></p>

<p>gdzie:<br />

<code>L</code>  = zera prowadz±ce s± pominiête,<br />
<code>T</code>  = zera koñcowe s± pominiête,<br />
<code>D</code>  = pe³ny zapis warto¶ci z przecinkiem (inaczej: nie s± pomijane zera),<br />
<code>A</code>  = koordynaty s± podawane absolutnie,<br />
<code>I</code>  = koordynaty s± podawane przyrostowo,<br />
<code>Nn</code> = numer sekwencji, gdzie n to liczba cyfr (rzadko u¿ywane)<br />
<code>Gn</code> = kod przygotowuj±cy funkcji (rzadko u¿ywane)<br />
<code>Xa</code> = format danych wej¶ciowych (maksimum to 5.5)<br />
<code>Yb</code> = format danych wej¶ciowych (j.w.)<br />
<code>Zb</code> = format danych wej¶ciowych (Z jest rzadko spotykane)<br />
<code>Dn</code> = kod projektu<br />
<code>Mn</code> = kod ró¿ny</p>

<a name="p321" />
<h3>Przyk³ady</h3>

<table>
  <tr>
    <td><code>%FSLAX24Y24*%</code></td>
    <td>Format z pominiêciem zer pocz±tkowych, koordynaty absolutne, w formacie = 2.4</td>
  </tr>
  <tr>
    <td><code>%FSTIX44Y44*%</code></td>
    <td>Format z pominiêciem zer koñcowych, koordynaty przyrostowe, w formacie = 4.4 </td>
  </tr>
</table>

<a name="p322" />
<h3>Jednostki osadzone</h3>

<p>Pliki RS274X mog± u¿ywaæ koordynatur oraz jednostek apertur zarówno w calach jak i milimetrach. Odpowiednie polecenia to:</p>

<table>
  <tr>
    <td><code>%MOIN*%</code></td>
    <td>oznacza cale</td>
  </tr>
  <tr>
    <td><code>%MOMM*%</code></td>
    <td>oznacza milimetry</td>
  </tr>
</table>

<a name="p323" />
<h3>Polaryzacja obrazu</h3>

<p>W starym formacie RS274D trzeba by³o zleciæ operatorowi fotoplotera by rêcznie prze³±czy³ siê na ¿±dan± polaryzacjê kliszy. Je¿eli operator nie zwróci³ uwagi lub nie by³ w stanie zgadn±æ w jakiej polaryzacji by³y pliki to klisza wychodzi³a ¼le. Za pomoc± poleceñ RS274X na po pocz±tku pliku mo¿na odwróciæ polaryzacjê kliszy.<br />

<img src="gerbview-files/rs274x_polarity.png" alt="Polaryzacja kliszy" /></p>

<table>
  <tr>
    <td><code>%IPPOS*%</code></td>
    <td>pozytyw (lewy)</td>
  </tr>
  <tr>
    <td><code>%IPNEG*%</code></td>
    <td>negatyw (prawy)</td>
  </tr>
</table>

<p>Nie nale¿y myliæ polaryzacji obrazu z poszczególnymi polaryzacjami warstw. Mo¿liwe jest stworzenie bardzo z³o¿onych rysunków, ³±cz±c poszczególne ciemne i jasne rysunki, a nastêpnie ustawiæ ogóln± polaryzacjê kliszy. Bêdzie o tym mowa w jednym z ostatnich punktów.</p>

<a name="p324" />
<h3>Osadzone definicje apertur</h3>

<p>Jedn± z g³ównych wad starej specyfikacji RS274D by³o to, ¿e definicja ka¿dej apertury nie by³a czê¶ci± pliku danych; zamiast tego by³a przeniesiona rêcznie na papierze lub w postaci pliku tekstowego, tak jak widaæ to poni¿ej.</p>

<a name="p3241" />
<h4>Definicje apertur</h4>

<pre><code>D-Kod      Kszta³t          Rozmiar X   Rozmiar Y

D10        okr±g            0.010
D11        kwadrat          0.030
D12        prostok±t        0.060       0.020
D13        po³. termiczne   0.050
D14        kszt. pod³u¿ny   0.060       0.025</code></pre>

<p>Niektóre apertury s± oczywiste - okr±g³e, kwadratowe i prostok±tne. Jednak zarówno pod³u¿ne i po³±czenia termiczne podlegaj± interpretacji operatora fotoplotera, jak pokazano poni¿ej.</p>

<table>
  <tr>
    <td colspan="3"><img src="gerbview-files/rs274x_thermal.png" alt="Ró¿ne wersje ³±cza" /></td>
  </tr>
  <tr>
	<td>Podstawowe ³±cze</td> <td>£±cze obrócone</td> <td>£±cze prostok±tne</td>
  </tr>
</table>

<p>W RS274D, budowanie w³a¶ciwego kszta³tu ³±cza termicznego by³o zadaniem operatora fotoplotera; by³ to znaczny wysi³ek i koszty zwi±zane z tworzeniem niestandardowych otworów i biblioteki musia³y byæ przez zamawiaj±cego dodatkowo poniesione.<br />
W RS274X nawet z³o¿one otwory s± opisane za pomoc± <strong>makr</strong>, które fotoplotery (i miejmy nadziejê oprogramowanie CAM) syntetyzuje w locie.</p>

<a name="p3242" />
<h4>Podstawowe definicje apertur</h4>

<p>RS274x zawiera kilka "standardowych" apertur poniewa¿ reprezentuj± one wiêcej ni¿ 90% pospolicie u¿ywanych kszta³tów "b³yskowych":</p>
<ul>
  <li>okr±g,</li>
  <li>prostok±t,</li>
  <li>obround,</li>
  <li>polygon.</li>
</ul>

<p>Przy tych zak³ada siê, ¿e bêd± na ¶rodku i mog± byæ zdefiniowane z otworem okr±g³ym lub prostok±tnym w razie potrzeby.</p>

<a name="p3243" />
<h4>Standardowe okrêgi</h4>

<p><code>%ADD{code}C,{$1}X{$2}X{$3}*%</code></p>

<p>gdzie:</p>

<dl>
  <dt><code>AD</code></dt>
  <dd>Parametr opisuj±cy aperturê</dd>
  <dt><code>D{code}</code></dt>
  <dd>D-kod do którego ta apertura zostanie przypisana (10-999)</dd>
  <dt><code>C</code></dt>
  <dd>Informuje w przypadku RS274X, ¿e jest to makro okrêgu</dd>

  <dt><code>$1</code></dt>
  <dd>Warto¶æ (cale lub milimetry) okre¶laj±ca zewnêtrzn± ¶rednicê</dd>
  <dt><code>$2</code></dt>
  <dd>Opcjonalny, je¶li wystêpuje okre¶la ¶rednicê otworu</dd>
  <dt><code>$3</code></dt>
  <dd>Opcjonalny, je¶li wystêpuje $2 oraz $3 reprezentuj± rozmiar otworu prostok±tnego</dd>
</dl>

<a name="p3244" />
<h4>Przyk³ady okrêgów</h4>

<p><img src="gerbview-files/rs247x_apertures.png" alt="Ró¿ne definicje apertur" /></p>

<pre><code>%ADD21C,.100*%                        (A) okr±g o rozmiarze 0.10 na D21

%ADD22C,.100X.050*%                   (B) okr±g o rozmiarze 0.10 z otworem
                                          0.05 na D22.

%ADD23C,.100X.050X.050*%              (C) okr±g o rozmiarze 0.10 z otworem
                                          kwadratowym 0.05 na D23.

%ADD24C,.100X.050X.025*%              (D) okr±g o rozmiarze 0.10 z otworem
                                          prostok±tnym 0.05 x 0.025 na D24.</code></pre>

<a name="p3245" />
<h4>Standardowe prostok±ty</h4>

<p><code>%ADD{code}R,{$1}X{$2}X{$3}X{$4}*%</code></p>

<p>gdzie:</p>
<dl>
  <dt><code>AD</code></dt>   
  <dd>Parametr opisuj±cy aperturê</dd>
  <dt><code>D{code}</code></dt>
  <dd>D-kod do którego ta apertura zostanie przypisana (10-999)</dd>
  <dt><code>R</code></dt> 
  <dd>Informuje w przypadku RS274X, ¿e jest to makro prostok±ta</dd>

  <dt><code>$1</code></dt>
  <dd>Warto¶æ (cale lub milimetry) d³ugo¶ci X prostok±ta</dd>
  <dt><code>$2</code></dt>
  <dd>Warto¶æ (cale lub milimetry) wysoko¶ci Y prostok±ta</dd>
  <dt><code>$3</code></dt>
  <dd>Opcjonalny, je¶li wystêpuje okre¶la ¶rednicê otworu</dd>
  <dt><code>$4</code></dt> 
  <dd>Opcjonalny, je¶li wystêpuje $2 oraz $3 reprezentuj± rozmiar otworu prostok±tnego</dd>
</dl>

<p>Aby poznaæ detale poleceñ zwi±zanych z rysowaniem obround-ów i polygon-ów (które rzadko s± u¿ywane) zajrzyj do <em>Gerber Format Guide</em>, Doc 0000-000-RM-00.</p>

<a name="p3246" />
<h4>Makra apertur</h4>

<p>Bardziej ogólne makra apertur mog± byæ traktowane jako pewien rodzaj jêzyka programowania, w którym buduje siê skomplikowan± definicjê przys³ony z serii prostszych elementów sk³adowych - prymitywów. Chocia¿ jest to bardzo potê¿ne narzêdzie w RS274X, u¿ywanie go ma swoje wady.<br />
Pamiêtaj, ¿e RS274X jest zasadniczo standardem <em>Gerber Scientific</em> - fotoplotery innych producentów mog± nie interpretowaæ standardu RS274X w ca³o¶ci - nawet je¶li realizuj± podzbiór prostszych poleceñ RS274X, które s± obs³ugiwane; to z³o¿one polecenia, takie jak  makra apertur mog± nie przek³adaæ siê prawid³owo lub w ogóle na kliszy. Dlatego te¿, wiêkszo¶æ programów do tworzenia PCB nie wykorzystuje z³o¿onych makr apertur.</p>

<p>Jednak makra s± niemal wymagane przy okre¶laniu ³±cz termicznych - i poniewa¿ ³±cza termiczne s± <strong>bardzo wa¿nym</strong> elementem w budowaniu p³aszczyzn zasilania i masy, przedstawiê  szczegó³owy przyk³ad makr u¿ywanych przy tworzeniu takiego ³±cza.</p>

<a name="p3247" />
<h4>Podstawowe elementy makr</h4>

<p>Pamiêtacie, ¿e mówi³em, i¿ makro jest jak jêzyk programowania - skomplikowana apertura  jest budowana z jednej lub wiêkszej ilo¶ci prostych postaci zwanych <strong>prymitywami</strong>. Dostêpne prymitywy obejmuj±:</p>


<pre><code>Nazwa              Numer         Opis oraz liczba parametrów

Circle             (1)           okr±g

Line Vector        (2 lub 20)    prostok±t zdefiniowany przez punkty
                                 przek±tnej oraz obrót. kwadratowe naro¿niki.

Line Center        (21)          prostok±t - zdefiniowany za pomoc± punktu
                                 centralnego, d³ugo¶ci i szeroko¶ci, oraz
                                 k±ta obrotu. kwadratowe naro¿niki.

Line-Lower Left    (22)          prostok±t - zdefiniowany za pomoc± lewego
                                 naro¿nika, d³ugo¶ci i szeroko¶ci, oraz k±ta
                                 obrotu. kwadratowe naro¿niki.

Outline            (4)           krawêd¼ definiowana przez parê wspó³rzêdnych
                                 maksimum wierzcho³ków = 50.

Polygon            (5)           linia ³amana z 3-10 krawêdziami. 
                                 zdefiniowana przez punkt centralny,
                                 zewnêtrzn± ¶rednicê oraz k±t obrotu.

Moire              (6)           punkt pozycjonuj±cy, zdefiniowany przez punkt
                                 centralny, liczbê okrêgów, grubo¶æ okrêgów,
                                 d³ugo¶æ krzy¿a, grubo¶æ oraz k±t obrotu.

Thermal            (7)           ³±cze termiczne zdefiniowane przez 
                                 zewnêtrzn± ¶rednicê, wewnêtrzn± ¶rednicê,
                                 grubo¶æ krzy¿a i k±t obrotu.</code></pre>

<a name="p3248" />								 
<h4>Przyk³adowe makro z wykorzystaniem apertur - £±cze termiczne</h4>

<p>£±cze termiczne jest tak wa¿ne, ¿e ma swój w³asny prymityw - nawet gdyby mia³o byæ zbudowane z innych prymitywów.<br />

<img src="gerbview-files/rs274x_buildthermal.png" alt="Tworzenie apertur z prymitywów" /></p>

<p><code>%AMTHERM100*7,0,0,0.100,0.050,0.025,0.0*%<br />
<br />
%ADD32THERM100*%</code> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;przypisz nazwê <code>THERM100</code> do D-kodu <code>32</code></p>

<p>gdzie:</p>
<dl>
  <dt><code>AM</code></dt>    
  <dd>Makro apertur</dd>
  <dt><code>THERM100</code></dt>
  <dd>Nazwa makra</dd>
  <dt><code>*</code></dt>
  <dd>Zakoñczenie nazwy makra</dd>
  <dt><code>7</code></dt>
  <dd>Prymityw 7, którym jest ³±cze termiczne</dd>
  <dt><code>0</code></dt>
  <dd>Pierwsze dwa parametry: punkt centralny x, y</dd>
  <dt><code>0.100</code></dt>
  <dd>Trzeci parametr: zewnêtrzna ¶rednica (wype³nione ko³o A powy¿ej)</dd>
  <dt><code>0.050</code></dt>
  <dd>Czwarty parametr: wewnêtrzna ¶rednica (puste ko³o B powy¿ej)</dd>
  <dt><code>0.025</code></dt>
  <dd>Pi±ty parametr: szeroko¶æ krzy¿a (puste pola C powy¿ej)</dd>
  <dt><code>0.0</code></dt>
  <dd>Szósty parametr: k±t obrotu krzy¿a (tu nie u¿ywane)</dd>
</dl>

<a name="p325" />
<h3>Warstwy wielokrotne</h3>

<p>By³o ca³kiem dobr± praktyk± w bran¿y PCB budowanie fotomasek z wielu plików Gerber. Jednak instrukcje dla operatora fotoplotera zawsze zawsze by³y robione rêcznie - zostawiaj±c miejsce na b³êdy i braki. Oto jak by³y one wykorzystywane:</p>

<pre><code>Instrukcja rysowania dla XYZ

Klisza1: Góra
targets.gbr                 pozytyw
comp.gbr                    pozytyw
padmaster.gbr               pozytyw

Klisza2: Dó³
targets.gbr                 pozytyw
sold.gbr                    pozytyw
padmaster.gbr               pozytyw

Klisza3: VCC
vcc1.gbr                    negatyw
clearance.gbr               negatyw
traces.gbr                  pozytyw</code></pre>

<p>RS274X zawiera dwa specjalne polecenia: <code>%LPD*%</code> oraz <code>%LPC*%</code>, które organizuj± dane w pliku poprzez warstwy. Za pomoc± kilku rozs±dnie u³o¿onych poleceñ <code>LPD/LPC</code> w po³±czeniu z poleceniem <code>IP</code> (polaryzacja obrazu), mo¿na budowaæ z³o¿one p³aszczyzny szybko i ³atwo. W poni¿szym przyk³adzie poka¿emy jak <code>LPD/LPC</code> mo¿e byæ wykorzystane do ³atwego po³o¿enia ¶cie¿ki na p³aszczy¼nie zasilania.</p>

<p>G³ówn± trudno¶æ z postawieniem ¶cie¿ki na p³aszczy¼nie zasilania stanowi usuwanie miedzi wokó³ ¶cie¿ki i pod³±czonych do niej punktów lutowniczych. Przy standardowym oprogramowaniu do tworzenia plików Gerber, czêsto musieli¶my wype³niæ za pomoc± ma³ych ¶cie¿ek ca³± powierzchniê miedzi z wyj±tkiem pola okre¶laj±cego prze¶wit. Generowa³o to bardzo du¿e i nieporêczne pliki Gerber.<br />
Podczas tworzenia tego samego pliku Gerber w formacie RS274X mo¿emy u¿yæ <code>LPC</code> (jasne warstwy) by narysowaæ ¶cie¿kê.</p>
 
<pre><code>G04 Parametry obrazu ***
%MOIN*%
%FSLAX24Y24*%
%IPNEG*%            to spowoduje, ¿e polaryzacja ca³ej kliszy bêdzie
                    negatywowa, eliminuj±c tym samym stosowanie wielu
                    ¶cie¿ek by wype³niæ p³aszczyznê zasilania.

%ADD10C,,,*%        tutaj definiujemy parê zaokr±glonych apertur oraz  
%ADD11C...*%        ³±cze termiczne
%ADD12C...*%
%AMTHERMAL*...*%    
%ADD13THERMAL*%
G04*
%LNINTERNAL_VCC*%   to jest nasza podstawowa p³aszczyzna zawieraj±ca
                    punkty prze¶witu, ³±cza termiczne, zewnêtrzn± ¶cie¿kê
                    definiuj±c± krawêdzie p³ytki, oraz obszar dla wewnêtrznej
                    ¶cie¿ki.

%LPD*%              oznacza, ¿e dane s± ciemne. jednak ca³a klisza bêdzie
                    negatywowa, zatem dane zamieni± siê w jasne pola.
G54D10*
data
data
data

G04 NEW LAYER ***
%LNTRACE_VCC*%      to zdefiniuje ¶cie¿kê i dwa punkty lutownicze A,B

%LPC*%              oznacza, ¿e dane tutaj s± jasne lub bêd± odwrócone.
                    jednak ca³a klisza bêdzie negatywowa, zatem ca³o¶æ 
                    danych zamieni siê w ciemne pola.
G54D12*
data
data
data
M02*                koniec zadania</code></pre>

<p>Nastêpuj±ca seria zdjêæ poni¿ej pokazuje, jak ³atwo mo¿na by³o narysowaæ p³aszczyznê <em>ground plane</em>, ze ¶cie¿k± wewn±trz, która zostanie tam umieszczona i odwrócona, a nastêpnie ca³y obraz zostanie ponownie odwrócony.</p>

<p><img src="gerbview-files/internal_vcc.png" alt="Warstwa INTERNAL_VCC" /><br />
Dane <code>INTERNAL_VCC</code>. Nale¿y zwróciæ uwagê na du¿e pola A, B oraz szerok± ¶cie¿kê bêd±c± obrazem prze¶witu.</p>

<p><img src="gerbview-files/trace_vcc.png" alt="Warstwa TRACE_VCC" /><br /> 
Wewnêtrzne dane <code>TRACE_VCC</code>. Poniewa¿ warstwa jest zdefiniowana jako LPC bêdzie ona odjêta od danych warstwy <code>INTERNAL_VCC</code>.</p>

<p><img src="gerbview-files/layers_combined.png" alt="Po³±czenie warstw" /><br />
Ciemna warstwa <code>VCC</code> zosta³a po³±czona z jasn± warstw± <code>TRACE</code> przed zamian± polaryzacji.</p>

<p><img src="gerbview-files/layers_inverted.png" alt="Po³±czone warstwy z negacj±" /><br />
Ciemna warstwa <code>VCC</code> zosta³a po³±czona z jasn± warstw± <code>TRACE</code> po zamianie polaryzacji.</p>

<a name="p326" />
<h3>G36/G37 Rysowanie wielok±tów</h3>

<p>Polecenia wielok±tów <code>G36/G37</code> wyprzedzaj± specyfikacjê RS274X, i tylko nowsze fotoplotery Gerber je wspieraj±. Jednak s± to bardzo potê¿ne polecenia i zapewne zobaczymy je czê¶ciej wykorzystane w przysz³o¶ci do opisywania z³o¿onych danych czêsto spotykanych w uk³adach scalonych (<code>IC</code>), uk³adów radiowych (<code>RF</code>) i mikrofalowych, oraz urz±dzeñ analogowych.<br />
Kiedy fotoploter widzi polecenie <code>G36*</code> natychmiast zmienia tryb - od teraz ignoruje wszelkie ustawienia przys³ony i traktuje ka¿de polecenie rysowania jako krawêd¼ wielok±ta, który nale¿y wype³niæ. Aplikacja tworz±ca pliki Gerber powinna tworzyæ proste i jasne wielok±ty.<br />

<img src="gerbview-files/polygon_fills.png" alt="Sposoby wype³niania polygonów" /></p>

<a name="p3261" />
<h4>Przyk³adowe u¿ycie G36/G37</h4>

<pre><code>G04 G36/G37 Przyk³ad Polygonu ***
%MOIN*%
%FSLAX24Y24*%
%IPPOS*%            

%ADD10C,,,*%        tutaj definiujemy parê apertur
%ADD11C...*%
%ADD12C...*%
G04*
%LPD*%
G54D10*             wybór D10
G01*
G36*                prze³±czenie do trybu polygon. Rozmiar i kszta³t D10 nie
                   ma ju¿ znaczenia.
X123Y123D02*       przesuniêcie do pozycji pocz±tkowej pisakiem w górze
X234D01*           rysowanie linii (krawêd¼)
Y456D01*           rysowanie linii (krawêd¼)
X234D01*           rysowanie linii (krawêd¼)
Y123D01*           rysowanie linii (krawêd¼) z powrotem do pocz±tku
G37*               koniec trybu polygon.</code></pre>

<a name="p4" />
<h1>4.  GerbView - Obs³uga programu</h1>

<a name="p41" />
<h2>Wprowadzenie do GerbView</h2>

<p><strong>GerbView</strong> to przegl±darka plików Gerber (w formacie <strong>RS274X</strong>), która umo¿liwia równie¿ przegl±danie <strong>plików wierceñ</strong> generowanych przez <strong>Pcbnew</strong> (w <strong>formacie Excellon</strong>). Potrafi ona wy¶wietliæ do 32 plików (odrêbnych warstw) pochodz±cych z plików Gerber i/lub plików wierceñ.<br />
Pliki mog± byæ wy¶wietlane w trybie transparentnym jak i trybie nak³adkowym, w formie stosu.</p>

<a name="p42" />
<h2>G³ówne okno programu</h2>

<p><img src="gerbview-files/gerbview_main_window.png" width="100%" alt="G³ówne okno programu" /></p>

<a name="p43" />
<h2>Górny pasek narzêdzi</h2>

<p><img src="gerbview-files/main_toolbar.png" width="100%" alt="Górny pasek narzêdzi" /></p>
<table>
  <tr>
    <td><img src="gerbview-files/icon_clear.png" alt="Ikona Wyczy¶æ warstwy" /></td>
	<td>Czy¶ci zawarto¶æ wszystkich warstw</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_load.png" alt="Ikona Za³aduj pliki Gerber" /></td>
	<td>£aduje pliki Gerber</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_drill.png" alt="Ikona Za³aduj pliki Excellon" /></td>
	<td>£aduje pliki wierceñ (format Excellon z <strong>Pcbnew</strong>)</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_page_settings.png" alt="Ikona Ustawienia strony" /></td>
	<td>Ustawia rozmiar strony dla polecenia wydruku oraz pokazuje/ukrywa ograniczenia strony</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_print.png" alt="Ikona Drukuj" /></td>
	<td>Otwiera okno dialogowe wydruku</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_zoom.png" alt="Ikony Powiêksz/Pomniejsz" /></td>
	<td>Powiêkszenie lub pomniejszenie widoku</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_refresh.png" alt="Ikona Od¶wie¿ widok" /></td>
	<td>Od¶wie¿a zawarto¶æ pola roboczego</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_zoomall.png" alt="Ikona Dopasuj widok" /></td>
	<td>Dostosowuje powiêkszenie do zawarto¶ci pola roboczego</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_layersel.png" alt="Wybór warstwy z listy" /></td>
	<td>Wybór warstwy</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_toolsel.png" alt="Wybór narzêdzia z listy" /></td>
	<td>Wybór D-kodu (Wyró¿nia elementy u¿ywaj±ce tego D-kodu)</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_format.png" alt="Informacje o formacie" /></td>
	<td>Informacje na temat pliku Gerber za³adowanego do bie¿±cej warstwy</td>
  </tr>
</table>
	
<a name="p44" />
<h2>Boczne paski narzêdzi</h2>

<a name="p441" />
<h3>Lewy pasek narzêdzi - Opcje</h3>

<table>
  <tr>
    <td rowspan="11"><img src="gerbview-files/left_toolbar.png" width="100%" alt="Lewy pasek narzêdzi" /></td>
    <td><img src="gerbview-files/icon_grid.png" alt="Ikona W³±cz siatkê" /></td>
	<td>W³±cza lub wy³±cza wy¶wietlanie siatki</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_polar.png" alt="Ikona Prze³±cz wspó³rzêdne" /></td>
	<td>W³±cza lub wy³±cza wy¶wietlanie wspó³rzêdnych polarnych</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_inchmm.png" alt="Ikony Prze³±cz jednostki" /></td>
	<td>Wybór wy¶wietlanych jednostek miary</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_cursorshape.png" alt="Ikona Zmiana kursora" /></td>
	<td>Wybór kszta³tu kursora</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_flashfull.png" alt="Ikona Prze³±cz tryb wy¶wietlania b³ysków" /></td>
	<td>Wybór trybu wy¶wietlania (pe³ny lub zarys) dla elementów b³yskowych (jak np. pady)</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_tracefull.png" alt="Ikona Prze³±cz tryb wy¶wietlania ¶cie¿ek" /></td>
	<td>Wybór trybu wy¶wietlania (pe³ny lub zarys) dla linii</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_polyfull.png" alt="Ikona Prze³±cz tryb wy¶wietlania wype³nieñ" /></td>
	<td>Wybór trybu wy¶wietlania (pe³ny lub zarys) dla wype³nieñ</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_ghostfull.png" alt="Ikona Prze³±cz tryb wy¶wietlania elementów negatywowych" /></td>
	<td>Pokazuje / ukrywa elementy b³yskowe rysowane w negatywie, tzw. duszki</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_dcodes.png" alt="Ikona Prze³±cz tryb wy¶wietlania D-Kodów" /></td>
	<td>Pokazuje / ukrywa warto¶ci D-kodów (dla elementów u¿ywaj±cych D-kodów)</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_displaymodes.png" alt="Ikony Prze³±czanie ogólnego trybu wy¶wietlania" /></td>
	<td>Tryby pracy wy¶wietlania warstw</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_layermanager.png" alt="Ikona Ukrycie panelu warstw" /></td>
	<td>Pokazuje / Ukrywa panel z wyborem warstw</td>
  </tr>
</table>

<a name="p442" />
<h3>Panel zarz±dzania warstwami</h3>

<table>
  <tr>
    <td><img src="gerbview-files/layer_manager.png" alt="Panel wyboru warstw" /></td>
    <td>Panel zarz±dzania warstwami s³u¿y do dwóch celów:<br />
        <ul>
          <li>Wybiera aktywn± warstwê</li>
          <li>Pokazuje/ukrywa warstwy</li>
        </ul>
        <br />
		Aktywna warstwa jest <strong>rysowana na koñcu</strong>.<br />
        Gdy ³adowany jest nowy plik, u¿ywana jest aktywna warstwa (nowe dane zastêpuj± poprzednie dane).<br />
        <br />
        <strong>Uwaga</strong>:<br />
        <ul>
          <li>Klikniêcie <strong>lewym klawiszem</strong> myszy na nazwie warstwy: <strong>wybiera aktywn± warstwê</strong>.</li>
          <li>Klikniêcie <strong>prawym klawiszem</strong> myszy w panelu zarz±dzania warstwami: <strong>pokazuje lub ukrywa wszystkie warstwy</strong>.</li>
          <li>Klikniêcie <strong>¶rodkowym klawiszem</strong> myszy w ikonkê z kolorem: <strong>zmienia kolor wybranej warstwy</strong>.</li>
        </ul>
    </td>
  </tr>
</table>

<a name="p443" />
<h3>Tryby wy¶wietlania warstw</h3>

<table>
  <tr>
    <td><img src="gerbview-files/icon_displaysimple.png" alt="Ikona W³±cz tryb prosty" />&nbsp;<strong>Tryb "prosty"</strong>.<br />
	Ka¿dy plik Gerber i ka¿dy element w pliku jest rysowany w porz±dku ustalonym w czasie ³adowania.<br />
    Aktywna warstwa jest jednak rysowana na koniec.<br />
    Gdy w plikach Gerber bêd± elementy negatywowe (rysowane na czarno) bêd± widoczne artefakty na obecnie rysowanych warstwach.</td>
	<td><img src="gerbview-files/display_simple.png" alt="Tryb prosty" /></td>
  </tr>
  <tr>
    <td><img src="gerbview-files/icon_displayoverlay.png" alt="Ikona W³±cz tryb nak³adkowy" />&nbsp;<strong>Tryb "nak³adkowy"</strong>.<br />
	Ka¿dy plik Gerber i ka¿dy element w pliku jest rysowany w porz±dku ustalonym w czasie ³adowania.<br />
    Aktywna warstwa jest jednak rysowana na koniec. <br />
    Gdy w plikach Gerber bêd± elementy negatywowe (rysowane na czarno) nie bêdzie widaæ artefaktów na obecnie rysowanych warstwach, poniewa¿ tryb ten rysuje ka¿dy z plików w lokalnym buforze przed pokazaniem warstwy na ekranie. Elementy negatywne nie tworz± artefaktów.</td>
	<td><img src="gerbview-files/display_overlay.png" alt="Tryb nak³adkowy" /></td>
  </tr>
  <tr>
	<td><img src="gerbview-files/icon_displaytransparent.png" alt="Ikona W³±cz tryb prze¼roczysty" />&nbsp;<strong>Tryb transparentny</strong>.</td>
	<td><img src="gerbview-files/display_transparent.png" alt="Tryb transparentny" /></td>
  </tr>
</table>

<a name="p444" />
<h3>Wy¶wietlanie wybranej warstwy</h3>

<p>Efekt ten jest widoczny tylko w trybach "prostym" lub "nak³adkowym".</p>

<table>
  <tr>
    <td><img src="gerbview-files/secondary_first.png" alt="Najpierw rysowana warstwa 2" /></td>
    <td>Warstwa 1 (zielona) jest rysowana po warstwie 2 (niebieska).</td>
  </tr>
  <tr>
    <td><img src="gerbview-files/primary_first.png" alt="Najpierw rysowana warstwa 1" /></td>
    <td>Warstwa 2 (niebieska) jest rysowana po warstwie 1 (zielona).</td>
  </tr>
</table>  

<a name="p45" />
<h2>Drukowanie warstw</h2>

<p>By wydrukowaæ warstwy, nale¿y u¿yæ narzêdzia <span class="command">Drukuj</span> dostêpnego pod ikon± <img src="gerbview-files/icon_print.png" alt="Ikona Drukuj" />, lub odpowiadaj±cej mu opcji z menu <span class="command">Plik</span>.</p>

<p><strong>Ostrze¿enia</strong></p>
<ol>
  <li>Nale¿y upewniæ siê, czy elementy znajduj± siê w obszarze wydruku (wybieranym za pomoc± narzêdzia <span class="command">Ustawienia strony</span> dostêpnego spod ikony <img src="gerbview-files/icon_page_settings.png" alt="Ikona Ustawienia strony" />).</li>
  <li>Nie nale¿y zapominaæ, ¿e fotoplotery u¿ywaj± zwykle du¿ego pola roboczego, znacznie przekraczaj±cego rozmiar strony u¿ywany w drukarkach.</li>
  <li>Czêsto zajdzie potrzeba przesuniêcia (za pomoc± poleceñ blokowych) ca³o¶ci warstw.</li>
</ol>

<a name="p451" />
<h3>Przesuwanie bloków</h3>
<p>Mo¿na przesuwaæ elementy poprzez operacje przeci±gania (z wci¶niêtym lewym klawiszem myszy) i przesuwaæ wybrane obszary na ekranie. Klikniêcie lewego klawisza myszy s³u¿y do umieszczania przesuwanego obszaru, który obecnie jest zaznaczony.</p>

<a name="p46" />
<h2>Polecenia menu</h2>

<a name="p461" />
<h3>Menu Plik</h3>

<p>Menu <span class="command">Plik</span> pozwala na wykonanie podstawowych czynno¶ci zwi±zanych z ³adowaniem plików, czyszczenia obszaru roboczego i wydruków.<br />

<img src="gerbview-files/menu_file.png" alt="Menu Plik" /></p>

<p>W menu tym wystêpuje specjalne polecenie <span class="command">Eksportuj do Pcbnew</span>, które pozwala by dane warstw sta³y siê ¼ród³em danych dla pliku z projektem obwodu drukowanego.</p>

<a name="p462" />
<h3>Eksport do Pcbnew</h3>

<p><strong>GerbView</strong> posiada limitowan± mo¿liwo¶æ eksportu plików Gerber do <strong>Pcbnew</strong>. Koñcowy rezultat bardzo zale¿y od tego, jakie cechy formatu RS274X zosta³y u¿yte w plikach Gerber.<br />
Format RS274X posiada cechy zorientowane na raster, które nie mog± byæ skonwertowane (g³ównie wszystkie cechy zwi±zane z obiektami w negatywie).<br />
Oprócz tego standardowo:</p>
<ul>
  <li>Elementy tworzone przez polecenia b³yskowe, s± konwertowane na przelotki.</li>
  <li>Linie s± konwertowane na segmenty ¶cie¿ek (lub na linie graficzne w przypadku warstw nie bêd±cych warstwami sygna³owymi).</li>
</ul>

<p>Wobec czego, u¿yteczno¶æ skonwertowanego pliku silnie zale¿y od sposobu w jakim pliki Gerber zosta³y wygenerowane przez dane narzêdzie PCB.</p>

<a name="p463" />
<h3>Menu Ustawienia</h3>

<p><img src="gerbview-files/menu_shortcuts.png" alt="Menu Ustawienia" /><br />
Menu to pozwala na dostêp do niektórych opcji zwi±zanych z wy¶wietlaniem oraz pozwala na edycjê skrótów klawiszowych.</p>

<a name="p464" />
<h3>Menu Ró¿ne</h3>

<p><img src="gerbview-files/menu_misc.png" alt="Menu Ró¿ne" /></p>

<p>Polecenia s± nastêpuj±ce:</p>
<ul>
  <li><span class="command">Lista D-Kodów</span> pokazuje D-kody jakie zosta³y u¿yte oraz ich parametry.</li>
  <li><span class="command">Poka¿ ¼ród³o</span> pokazuje zawarto¶æ pliku Gerber z aktywnej warstwy w edytorze tekstu.</li>
  <li><span class="command">Wyczy¶æ warstwê</span> kasuje zawarto¶æ aktywnej warstwy.</li>
  <li><span class="command">Edytor tekstu</span> wybiera domy¶lny edytor tekstowy jaki bêdzie u¿ywany przy podgl±daniu zawarto¶ci plików.</li>
</ul>

</div>

</div>

</body>
</html>
